---
title: "Data Insights"
---

## Visual Summary of All Monitored Trials

This page provides a visual overview of the clinical trials being monitored. The visualizations are based on the latest consolidated raw data.

[Download Full Snapshots (CSV)](data/all_trials_raw.csv)

::: {.panel-tabset}

### Status & Phase

```{python}
#| echo: false
#| warning: false
import pandas as pd
import plotly.express as px
import os

csv_path = "data/all_trials_raw.csv"

if os.path.exists(csv_path):
    df = pd.read_csv(csv_path)
    
    if 'status_overallStatus' in df.columns:
        status_counts = df['status_overallStatus'].value_counts().reset_index()
        status_counts.columns = ['Status', 'Count']
        fig1 = px.bar(status_counts, x='Status', y='Count', 
                     title='Study Status Distribution', 
                     color='Status',
                     template='plotly_white')
        fig1.show()
```

```{python}
#| echo: false
#| warning: false
if os.path.exists(csv_path):
    if 'design_phases' in df.columns:
        phase_df = df['design_phases'].dropna().astype(str).str.split(', ').explode()
        phase_counts = phase_df.value_counts().reset_index()
        phase_counts.columns = ['Phase', 'Count']
        fig2 = px.pie(phase_counts, names='Phase', values='Count', 
                     title='Trial Phase Distribution',
                     hole=0.4,
                     template='plotly_white')
        fig2.show()
```

### Timeline

```{python}
#| echo: false
#| warning: false
if os.path.exists(csv_path):
    if 'status_startDate_date' in df.columns:
        df['start_year'] = pd.to_datetime(df['status_startDate_date'], errors='coerce').dt.year
        timeline = df.groupby('start_year').size().reset_index(name='Count')
        timeline = timeline.dropna()
        fig3 = px.line(timeline, x='start_year', y='Count', 
                      title='Trial Initiation Timeline (Starts per Year)', 
                      markers=True,
                      template='plotly_white')
        fig3.update_layout(xaxis_title='Year', yaxis_title='Number of New Trials')
        fig3.show()
```

### Top Sponsors

```{python}
#| echo: false
#| warning: false
if os.path.exists(csv_path):
    if 'sponsorCollaborators_leadSponsor_name' in df.columns:
        sponsor_counts = df['sponsorCollaborators_leadSponsor_name'].value_counts().reset_index().head(12)
        sponsor_counts.columns = ['Sponsor', 'Count']
        fig4 = px.bar(sponsor_counts, x='Count', y='Sponsor', 
                     title='Top Lead Sponsors (by Number of Trials)', 
                     orientation='h', 
                     color='Count',
                     color_continuous_scale='Viridis',
                     template='plotly_white')
        fig4.update_layout(yaxis={'categoryorder':'total ascending'})
        fig4.show()
```

:::

[Back to Status Summary](index.qmd)
