---
title: "CCR8"
---

::: {.callout-note}
CCR8 ÌÉÄÍ≤ü ÏûÑÏÉÅÏãúÌóò Î™®ÎãàÌÑ∞ÎßÅ
:::

## Monitoring Status

```{python}
#| echo: false
#| output: asis
import json
import os

target_name = "ccr8"
summary_path = f"data/targets/{target_name}/status_summary.json"

if os.path.exists(summary_path):
    with open(summary_path, "r") as f:
        summary = json.load(f)
    
    print("| Trial ID | Sponsor | Update | Status | Conditions | Phases | Start | End | Enroll | Last Updated |")
    print("| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |")
    for item in summary:
        update_color = "üü¢" if item.get('monitor_status') == "No Change" else "üî¥"
        print(f"| [{item['id']}](https://clinicaltrials.gov/study/{item['id']}) | {item.get('sponsor', 'N/A')} | {update_color} {item.get('monitor_status')} | {item.get('status', 'N/A')} | {item.get('conditions', 'N/A')} | {item.get('phases', 'N/A')} | {item.get('study_start', 'N/A')} | {item.get('study_end', 'N/A')} | {item.get('enrollment', 'N/A')} | {item.get('last_updated', 'N/A')} |")
else:
    print(f"No monitoring data available yet for {target_name} at {os.path.abspath(summary_path)}. Run the data collection script first.")
```

[Download Status Summary (CSV)](../data/targets/ccr8/status_summary.csv)

---

## Visual Summary

::: {.panel-tabset}

### Status & Phase

```{python}
#| echo: false
#| warning: false
import pandas as pd
import plotly.express as px
import os

target_name = "ccr8"
csv_path = f"data/targets/{target_name}/all_trials_raw.csv"

if os.path.exists(csv_path):
    df = pd.read_csv(csv_path)
    
    if 'status_overallStatus' in df.columns:
        status_counts = df['status_overallStatus'].value_counts().reset_index()
        status_counts.columns = ['Status', 'Count']
        fig1 = px.bar(status_counts, x='Status', y='Count', 
                     title='Study Status Distribution', 
                     color='Status',
                     template='plotly_white')
        fig1.show()
else:
    print("No data available yet.")
```

```{python}
#| echo: false
#| warning: false
if os.path.exists(csv_path):
    if 'design_phases' in df.columns:
        phase_df = df['design_phases'].dropna().astype(str).str.split(', ').explode()
        phase_counts = phase_df.value_counts().reset_index()
        phase_counts.columns = ['Phase', 'Count']
        fig2 = px.pie(phase_counts, names='Phase', values='Count', 
                     title='Trial Phase Distribution',
                     hole=0.4,
                     template='plotly_white')
        fig2.show()
```

### Top Sponsors

```{python}
#| echo: false
#| warning: false
if os.path.exists(csv_path):
    if 'sponsorCollaborators_leadSponsor_name' in df.columns:
        sponsor_counts = df['sponsorCollaborators_leadSponsor_name'].value_counts().reset_index().head(12)
        sponsor_counts.columns = ['Sponsor', 'Count']
        fig4 = px.bar(sponsor_counts, x='Count', y='Sponsor', 
                     title='Top Lead Sponsors (by Number of Trials)', 
                     orientation='h', 
                     color='Count',
                     color_continuous_scale='Viridis',
                     template='plotly_white')
        fig4.update_layout(yaxis={'categoryorder':'total ascending'})
        fig4.show()
```

:::

[Download Full Data (CSV)](../data/targets/ccr8/all_trials_raw.csv)

---

## Change History

::: {.panel-tabset}

### Target Milestones

```{python}
#| echo: false
#| output: asis
import json
import os

target_name = "ccr8"
target_h_file = f"data/history/target_{target_name}.json"

if os.path.exists(target_h_file):
    with open(target_h_file, "r") as f:
        history = json.load(f)
    
    for record in reversed(history[-10:]):
        print(f"**Date:** {record['timestamp']}")
        print(f"\n{record['event']}\n")
        print("***")
else:
    print(f"No target-level milestones recorded yet for {target_name}.")
```

### Trial Changes

```{python}
#| echo: false
#| output: asis
import json
import os

target_name = "ccr8"
summary_path = f"data/targets/{target_name}/status_summary.json"

# Get trial IDs for this target
target_trials = []
if os.path.exists(summary_path):
    with open(summary_path, "r") as f:
        target_trials = [item['id'] for item in json.load(f)]

history_found = False
for trial_id in target_trials:
    h_file = f"data/history/{trial_id}_history.json"
    if os.path.exists(h_file):
        with open(h_file, "r") as f:
            history = json.load(f)
        
        # Filter out "Initial data collection" to only show real changes
        real_changes = [r for r in history if r['diff'] != "Initial data collection"]
        
        if real_changes:
            if not history_found:
                history_found = True
            print(f"#### {trial_id}")
            for record in reversed(real_changes[-5:]):
                print(f"**Date:** {record['timestamp']}")
                print(f"\n{record['diff']}\n")
                print("***")

if not history_found:
    print(f"No specific trial changes (beyond initial collection) recorded yet for {target_name}.")
```

:::
